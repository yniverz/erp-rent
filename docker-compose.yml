version: '3.8'

services:
  web:
    build: .
    ports:
      - "5000:5000"
    environment:
      - PYTHONUNBUFFERED=1
      - SECRET_KEY=${SECRET_KEY:-dev-secret-key-please-change-in-production}
      - ADMIN_USERNAME=${ADMIN_USERNAME:-admin}
      - ADMIN_PASSWORD=${ADMIN_PASSWORD:-password123}
      - FLASK_ENV=production
      # Optional SMTP for inquiry notifications
      - SMTP_SERVER=${SMTP_SERVER:-}
      - SMTP_PORT=${SMTP_PORT:-587}
      - SMTP_USER=${SMTP_USER:-}
      - SMTP_PASSWORD=${SMTP_PASSWORD:-}
      - SMTP_FROM=${SMTP_FROM:-}
      # Optional favicon
      - FAVICON_URL=${FAVICON_URL:-}
      # Optional accounting API integration
      - ACCOUNTING_API_URL=${ACCOUNTING_API_URL:-}
      - ACCOUNTING_API_KEY=${ACCOUNTING_API_KEY:-}
    volumes:
      - ./instance:/app/instance
    restart: unless-stopped
